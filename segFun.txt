#Segment Video function
def segment_video(response, video_id):
    for i, segment in enumerate(response):
        start_time = math.floor(float(segment.get("start_time", 0)))
        end_time = math.ceil(float(segment.get("end_time", 0))) + 2
        output_file = fr"AIShortsCreator/output/{video_id}_output{str(i).zfill(3)}.mp4"
        command = fr"ffmpeg -i C:\Users\Beffa\Documents\Python\AIShortsCreator\input\{video_id}_input_video.mp4 -ss {start_time} -to {end_time} -c copy {output_file}"
        subprocess.call(command, shell=True)
        logging.info('Segmento video.')

def segment_video(response, video_id):
    for i, segment in enumerate(response):
        start_time = math.floor(float(segment.get("start_time", 0)))
        end_time = math.ceil(float(segment.get("end_time", 0))) + 2
        output_file = fr"AIShortsCreator/output/{video_id}_output{str(i).zfill(3)}.mp4"
        input_file = fr"C:\Users\Beffa\Documents\Python\AIShortsCreator\input\{video_id}_input_video.mp4"
        
        # Comando ffmpeg ajustado para preencher a tela toda mantendo a proporção 9:16
        command = (
            fr'ffmpeg -i {input_file} -ss {start_time} -to {end_time} -vf '
            fr'scale=1080:1920:force_original_aspect_ratio=increase,crop=1080:1920 '
            fr'-c:a copy {output_file}'
        )

        subprocess.call(command, shell=True)
        logging.info(f'Segmento de vídeo {i} gerado: {output_file}')

FUNÇÂO DE USO!!!!
def segment_video(response, video_id):
    for i, segment in enumerate(response):
        start_time = math.floor(float(segment.get("start_time", 0)))
        end_time = math.ceil(float(segment.get("end_time", 0))) + 2
        output_file = fr"AIShortsCreator/output/{video_id}_output{str(i).zfill(3)}.mp4"
        input_file = fr"C:\Users\Beffa\Documents\Python\AIShortsCreator\input\{video_id}_input_video.mp4"
        
        # Comando ffmpeg ajustado para aspecto 9:16
        command = (
            fr'ffmpeg -i {input_file} -ss {start_time} -to {end_time} -vf '
            fr'scale=w=1080:h=-1:force_original_aspect_ratio=decrease,pad=1080:1920:(ow-iw)/2:(oh-ih)/2 '
            fr'-c:a copy {output_file}'
        )

        subprocess.call(command, shell=True)
        logging.info(f'Segmento video {i} gerado: {output_file}')